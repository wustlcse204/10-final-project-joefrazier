(this["webpackJsonp10-final-project-joefrazier"]=this["webpackJsonp10-final-project-joefrazier"]||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(94),i=n.n(s),o=(n(100),n(12)),c=n.n(o),u=n(22),l=n(6),p=n(7),d=n(9),m=n(8),h=(n(102),n(17)),f=n.n(h);n(103),n(105);f.a.initializeApp({apiKey:"AIzaSyCqef48hVI-52yHHE5ZdVIpXtEIQFoie_Y",authDomain:"git-social-v1.firebaseapp.com",databaseURL:"https://git-social-v1.firebaseio.com",projectId:"git-social-v1",storageBucket:"git-social-v1.appspot.com",messagingSenderId:"979995074373",appId:"1:979995074373:web:a47830151a144caccea82c"});var g=f.a.auth();f.a.firestore();function b(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new f.a.auth.GithubAuthProvider).addScope("repo"),t.addScope("user"),e.next=5,f.a.auth().signInWithPopup(t).then((function(e){n=e.credential.accessToken;e.user})).catch((function(e){var t=e.code;e.message,e.email,e.credential;"auth/account-exists-with-different-credential"===t?alert("You have already signed up with a different auth provider for that email."):console.error(e)}));case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(55),n(108);var k=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-container"},r.a.createElement("h2",null,"Login/Register"),r.a.createElement("input",{type:"button",className:"login-input log-btn",id:"login-btn",onClick:this.props.onClick,value:"Login with GitHub"}))}}]),n}(a.Component),E=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"logout-container"},r.a.createElement("input",{type:"button",className:"login-input log-btn",id:"login-btn",onClick:this.props.onClick,value:"Logout"}))}}]),n}(a.Component),O=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"largeheader-container"},r.a.createElement("h1",{className:"large-text"},"GitSocial"))}}]),n}(a.Component),j=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,this.props.name),r.a.createElement("input",{type:"button",className:"postRepoBtn",value:"Post"}))}}]),n}(a.Component),y=function(e){Object(d.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).loadUserReposCallback=function(e){console.log("CALLBACK "+JSON.stringify(e)),a.setState({repos:e})},a.loadUserRepos=function(){var e=a.loadUserReposCallback,t=new XMLHttpRequest;t.onreadystatechange=function(){4===this.readyState?e(JSON.parse(this.responseText)):console.log("Error")},t.open("GET","https://api.github.com/user/repos?visibility=public",!0),t.setRequestHeader("Content-type","application/json"),t.setRequestHeader("Authorization","token "+a.state.accessToken),t.send()},a.setUserState=function(e){a.setState({userGHLogin:e.login,userGHPic:e.avatar_url,userGH:e.url,userGHBio:e.bio,userGHReposUrl:e.repos_url}),a.loadUserRepos()},a.onClickHandler=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:t=e.sent,a.setState({accessToken:t}),a.requestUsername(t);case 5:case"end":return e.stop()}}),e)}))),a.onClickHandlerOut=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({isLoggedIn:!1}),f.a.auth().signOut().then((function(){})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)}))),a.requestUsername=function(e){var t=a.setUserState,n=new XMLHttpRequest;n.onreadystatechange=function(){4===this.readyState?t(JSON.parse(this.responseText)):console.log("Error")},n.open("GET","https://api.github.com/user",!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Authorization","token "+e),n.send()},a.state={isLoggedIn:!1,username:"",userName:"",uid:"",userEmail:"",accessToken:"",repos:[],userGHLogin:"",userGHPic:"",userGH:"",userGHBio:"",userGHReposUrl:""},a}return Object(p.a)(n,[{key:"render",value:function(){return this.state.isLoggedIn?r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement("div",null," User Logged in"),r.a.createElement(E,{onClick:this.onClickHandlerOut}),r.a.createElement("div",{className:"user-repos"},this.state.repos.map((function(e){return r.a.createElement(j,{key:e.id,name:e.name})})))):r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(k,{onClick:this.onClickHandler}))}},{key:"componentDidMount",value:function(){var e=this;g.onAuthStateChanged((function(t){if(null!=g.currentUser){JSON.parse(JSON.stringify(t));e.setState({isLoggedIn:!0,userName:t.displayName,uid:t.uid,userEmail:t.email})}else e.state={isLoggedIn:!1,username:"",userName:"",uid:"",userEmail:"",accessToken:"",repos:[],userGHLogin:"",userGHPic:"",userGH:"",userGHBio:"",userGHReposUrl:""}}))}}]),n}(a.Component);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root"))},55:function(e,t,n){},95:function(e,t,n){e.exports=n(249)}},[[95,1,2]]]);
//# sourceMappingURL=main.70d29087.chunk.js.map